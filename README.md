# test-sql

5年ほど前に参画したプロジェクトにて作成したクエリを参考に、テーブル情報とそこからデータを抽出するビューを作成いたしました。
Webシステムにて登録された営業用データ(受注・売上)を、フォーキャストや決算に合わせて加工することを想定しております。

当時参画していたプロジェクトはDataSpiderというプラットフォームを利用して、PowerBIに出力できる形に加工する作業を実施しておりました。OracleDB、SQL Server、MySQL等異なるDBを利用しているグループ各社から必要なテーブルデータを抽出し、MySQLで構築したDBにTRUNCATE→INSERTでデータを格納するシステムだったと記憶しております。
横持ちにしているデータを縦持ちに変更したりなど、今回ご提出するクエリよりも複雑な処理を実施していましたが、テーブル情報等の記憶が定かでなく再現することができませんでした。

## テーブル情報

1. 製品マスタテーブル(product_master)
   - 製品情報を保持するテーブル
2. 顧客マスタテーブル(customer_master)
   - 顧客情報を保持するテーブル
3. 部署マスタテーブル(department_master)
   - 部署情報を保持するテーブル
4. 従業員マスタテーブル(employee_master)
   - 従業員情報を保持するテーブル
5. 受注管理テーブル(orders)
   - 受注情報を注文ごとに保持するテーブル
6. 受注明細テーブル(order_details)
   - 受注情報を製品や金額、割引率ごとに保持するテーブル
7. 売上管理テーブル(sales)
   - 受注に対する売上や利益、計上年月を保持するテーブル
8. 在庫管理テーブル(inventory)
   - 製品の在庫情報を保持するテーブル

## ビュー情報

1. 部署ごとの年度別売上金額を表示する(department_sales_by_year_view)
2. 部署ごとの月別売上金額（見込み含む）を表示する(department_sales_by_month_view)
3. 商品ごとの在庫状況を表示する(product_inventory_view)
4. 顧客ごとの製品購入履歴を表示する(customer_purchase_history_view)
5. 製品ごとの月別売上金額を表示する(product_sales_by_month_view)
